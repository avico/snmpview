<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta http-equiv="Content-Language" content="ru"/>
    <script language="JavaScript">
      function expandit(id){
      obj = document.getElementById(id);
      if (obj.style.display=="none") obj.style.display="";
      else obj.style.display="none";
      }
    </script>
    <title>SNMP Alarm List</title>
  </head>
  <body>
    <h1>Recent alarms</h1>
    <table border="1" cellpadding="3">
    <thead bgcolor="yellow">
      <tr>
        <th>Time</th>
        <th>NE</th>
        <th>Problem</th>
        <th>Trap</th>
        <th>Varbinds</th>
        <th>Acknowledge</th>
      </tr>
    </thead>
    <tbody>
    {% for alarm in alarms  %}
      <tr>
        <td>{{ alarm.datetime }}</td>
        <td>{{ alarm.target }}</td>
        <td>{{ alarm.problem }}</td>
        <td>{{ alarm.trap }}</td>
        <td width="330">
          <span style="cursor:pointer;color:blue;" onClick="expandit('{{ forloop.counter }}')">Expand varbinds...</span>
          <div id = "{{ forloop.counter }}" style="display:none">{{ alarm.varbinds }}</div>          
        </td>
        <td>{{ alarm.ack }}</td>
      </tr>
    {% endfor %}
    </tbody>
    </table>
    <div class="pagination">
    <span class="step-links">
        {% if alarms.has_previous %}
            <a href="?page={{ alarms.previous_page_number }}">Previous</a>
        {% endif %}
        <span class="current">
            Page {{ alarms.number }} of {{ alarms.paginator.num_pages }}.
        </span>
        {% if alarms.has_next %}
            <a href="?page={{ alarms.next_page_number }}">Next</a>
        {% endif %}
    </span>
    </div>
  </body>
</html>
